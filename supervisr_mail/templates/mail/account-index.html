{% extends "mail/base.html" %}

{% load supervisr_title %}
{% load i18n %}

{% block title %}
{% supervisr_title "Mail" %}
{% endblock %}

{% block content %}
<a href="{% url 'supervisr_mail:mail-account-new' %}" class="btn btn-sm">
  {% trans "New Account" %}
</a>
<table class="table">
  <thead>
    <tr>
      <th>{% trans 'Full Address' %}</th>
      <th>{% trans 'Domain' %}</th>
      <th>{% trans 'Owner' %}</th>
      <th>{% trans 'Usage' %}</th>
      <th>{% trans 'Forwarder Destination' %}</th>
      <th>{% trans 'Is Catchall?' %}</th>
    </tr>
  </thead>
  <tbody>
    {% for account in accounts %}
      <tr>
        <td>{{ account.address }}@{{ account.domain.domain }}</td>
        <td>{{ account.domain.domain }}</td>
        <td>{{ account.users.all|join:"," }}</td>
        <td>
          {% if account.quota > 0 %}
            <div class="progress labeled">
              <progress max="{{ account.quota }}" value="{{ account.size }}"></progress>
              <span></span>
            </div>
          {% else %}
            {{ account.size }}
          {% endif %}
        </td>
        <td>
          {% if account.mailforwarder_set.exists %}
          <clr-icon shape="check"></clr-icon>
          {% else %}
          <clr-icon shape="times"></clr-icon>
          {% endif %}
        </td>
        <td>
          {% if account.is_catchall %}
          <clr-icon shape="check"></clr-icon>
          {% else %}
          <clr-icon shape="times"></clr-icon>
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
